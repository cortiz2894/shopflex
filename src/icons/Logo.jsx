'use client'
import { useLayoutEffect, useRef, useState } from "react";
import styles from './Logo.module.scss'
import classNames from "classnames";
import gsap from 'gsap'

const Logo = ({ drawAnimation = false, ...props }) => {
  const firstPathRef = useRef(null)
  const secondPathRef = useRef(null)

  useLayoutEffect(() => {
    if(drawAnimation && firstPathRef.current && secondPathRef.current) {
      requestAnimationFrame(drawLogo)
    }
  }, [drawAnimation])
    
  const drawLogo = () => {
    gsap.to(firstPathRef.current, {
      strokeDashoffset: 0,
      duration: 10,
      ease: 'ease'
    })
    gsap.to(secondPathRef.current, {
      strokeDashoffset: 0,
      duration: 10,
      ease: 'ease'
    })
  }
  
  return(
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 118 34"
    {...props}
  >
    <g fill="currentColor">
      <path 
        ref={firstPathRef}
        className={classNames({ [styles.logoPath]: drawAnimation })}
        {...(drawAnimation ? {
          stroke: "white",
          fill: "transparent",
          strokeWidth: "1",
        }:{fill:"currentColor"})}
        
        d="M66.99 21.947c-2.609 0-4.79-2.032-4.79-4.958.118-6.55 9.484-6.522 9.613 0 0 2.932-2.216 4.957-4.824 4.957Zm0-13.357c-6.958-.097-10.814 7.554-7.005 13.282 3.124 4.69 10.902 4.673 14.038 0 3.839-5.74-.07-13.379-7.028-13.282m32.031 6.225c.24-.645.603-1.232 1.137-1.706 2.157-1.866 6.5-1.318 7.185 1.706h-8.322Zm12.208 1.945c.129-11.148-16.323-10.651-16.276.177-.076 3.292 1.835 6.636 5.052 7.857 3.271 1.3 7.415.519 9.712-2.169 0 0 .446-.456-.053-.798l-.445-.308s-1.231-.845-1.624-1.153c-.392-.308-.638.052-.638.052-1.044 1.26-2.849 1.7-4.443 1.466-2.222-.274-3.722-2.083-3.833-4.21h11.968c.322 0 .58-.258.58-.571v-.348" 
      />
      <path 
        ref={secondPathRef}
        className={classNames({ [styles.logoPath]: drawAnimation })}
        {...(drawAnimation ? {
          stroke: "white",
          fill: "transparent",
          strokeWidth: "1",
        }:{fill:"currentColor"})}
        d="M85.352 21.952c-2.58 0-4.865-1.968-4.865-5.003.287-6.562 9.495-6.465 9.595 0 0 2.807-2.122 5.003-4.73 5.003Zm.416-13.362c-2.075 0-4.12.793-5.281 2.305V2.896a.477.477 0 0 0-.48-.467h-2.75a.476.476 0 0 0-.48.467V16.51c-.235 5.295 3.3 8.94 8.475 8.895 11.288.245 11.248-16.677.522-16.808M38.62 23.87l-3.006 7.234c-.082.256.059.467.328.467h3.025c.263 0 .55-.21.638-.467l9.05-21.452a.47.47 0 0 0-.446-.645h-2.79a.774.774 0 0 0-.714.468l-4.074 9.784-4.068-9.784a.77.77 0 0 0-.715-.468h-2.795a.47.47 0 0 0-.446.645l6.02 14.223-.006-.006Zm20.122-11.948.3-2.561a.472.472 0 0 0-.382-.508c-.504-.103-1.67-.268-2.227-.263-4.8-.256-7.62 2.785-7.532 7.258v8.683c0 .257.217.468.481.468h2.784a.44.44 0 0 0 .446-.434V16.88c0-1.951.263-3.183 1.066-3.868 1.348-1.141 3.576-.89 4.525-.702a.446.446 0 0 0 .533-.382M6.192 16.949c0-2.842 2.121-4.907 4.73-4.907 6.406.211 6.523 9.693 0 9.916-2.609 0-4.73-2.197-4.73-5.004m-3.681.023c0 5.198 3.51 8.444 8.51 8.421 5.181.052 8.71-3.594 8.475-8.889V2.896a.47.47 0 0 0-.48-.467h-2.75a.476.476 0 0 0-.48.467v8c-1.16-1.507-3.206-2.306-5.28-2.306-4.361 0-7.995 3.287-7.995 8.387Zm28.696-5.055.299-2.561a.472.472 0 0 0-.381-.508c-.504-.103-1.67-.268-2.227-.263-4.8-.256-7.62 2.785-7.532 7.258v8.683c0 .257.217.468.48.468h2.785a.44.44 0 0 0 .445-.434V16.88c0-1.951.264-3.183 1.067-3.868 1.348-1.141 3.575-.89 4.525-.702a.443.443 0 0 0 .533-.382m80.76-3.446c-1.488 0-2.696-1.175-2.696-2.624.141-3.48 5.252-3.48 5.393 0 0 1.449-1.208 2.624-2.697 2.624Zm0-6.053c-1.945 0-3.522 1.534-3.522 3.429.188 4.552 6.863 4.552 7.051 0 0-1.895-1.583-3.43-3.529-3.43Z" 
      />
    </g>
  </svg>
)}
export default Logo
